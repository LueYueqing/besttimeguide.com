# QR Code Generator 项目可提取功能清单

基于对 `qr-code-generator` 项目的分析，以下是可提取到项目模板中的功能模块。

## ✅ 核心功能（已确认需要）

### 1. Google 登录认证系统 ⭐⭐⭐
**文件列表：**
- `lib/auth.ts` - NextAuth 配置（Google OAuth + 开发模式凭证登录）
- `app/api/auth/[...nextauth]/route.ts` - NextAuth API 路由
- `app/auth/signin/page.tsx` - 登录页面（Google 登录按钮 + 开发模式表单）
- `app/auth/error/page.tsx` - 登录错误页面
- `components/Providers.tsx` - SessionProvider 包装器
- `components/AuthButton.tsx` - 登录/登出按钮组件
- `contexts/UserContext.tsx` - 用户上下文（用户信息管理）

**数据库表：**
- `User` - 用户表（包含 plan, isAdmin, referredBy 等字段）
- `Account` - OAuth 账户表（NextAuth 必需）
- `Session` - 会话表（NextAuth 必需）
- `VerificationToken` - 验证令牌表（NextAuth 必需）

**依赖包：**
- `next-auth@^5.0.0-beta.30`
- `@auth/prisma-adapter`

---

### 2. Stripe 支付系统 ⭐⭐⭐
**文件列表：**
- `app/api/checkout/route.ts` - 创建 Stripe Checkout 会话
- `app/api/stripe/webhook/route.ts` - Stripe Webhook 处理（订阅创建/更新/取消）
- `app/api/billing/portal/route.ts` - Stripe 订阅管理门户
- `app/pricing/page.tsx` - 定价页面（月付/年付切换，计划选择）
- `lib/pricing.ts` - 价格配置（单一数据源）
- `lib/subscription.ts` - 订阅工具函数（权限检查、计划获取）

**数据库表：**
- `UserSubscription` - 用户订阅表（包含 Stripe 相关信息）

**依赖包：**
- `stripe`

**功能特性：**
- ✅ 订阅创建（月付/年付）
- ✅ 订阅升级/降级
- ✅ 订阅取消
- ✅ 自动续费处理
- ✅ 支付失败处理
- ✅ 退款处理
- ✅ 订阅管理门户集成

---

## 🔍 其他可重用功能（请确认）

### 3. 邀请推荐系统 ⭐⭐
**文件列表：**
- `app/api/referral/associate/route.ts` - 关联邀请关系
- `lib/referral.ts` - 邀请奖励处理逻辑

**数据库表：**
- `Referral` - 邀请记录表
- `User.referredBy` - 用户表中的邀请人字段

**功能特性：**
- ✅ 邀请链接生成
- ✅ 邀请关系关联
- ✅ 邀请奖励发放
- ✅ 邀请统计

---

### 4. API 密钥管理 ⭐⭐
**文件列表：**
- `app/api/api-keys/` - API 密钥管理 API
- `app/dashboard/` - 仪表板中的 API 密钥管理界面

**数据库表：**
- `ApiKey` - API 密钥表（包含 keyHash, keyPrefix, lastUsedAt 等）

**功能特性：**
- ✅ API 密钥生成
- ✅ API 密钥验证
- ✅ 使用统计
- ✅ 密钥管理（激活/停用/删除）

---

### 5. 用户仪表板组件 ⭐
**文件列表：**
- `app/dashboard/components/` - 仪表板组件
  - `SubscriptionInfo.tsx` - 订阅信息显示
  - `UpgradeModal.tsx` - 升级弹窗
  - `DowngradeWarning.tsx` - 降级警告
  - `StatsCards.tsx` - 统计卡片
  - `SidebarNavigation.tsx` - 侧边栏导航

**功能特性：**
- ✅ 订阅状态显示
- ✅ 计划升级/降级 UI
- ✅ 用户统计展示
- ✅ 导航菜单

---

### 6. 用户资料页面 ⭐
**文件列表：**
- `app/dashboard/profile/page.tsx` - 用户资料页面
- `app/dashboard/profile/profile-client.tsx` - 客户端组件

**功能特性：**
- ✅ 用户信息编辑
- ✅ 订阅管理入口
- ✅ 账户设置

---

### 7. 取消订阅页面 ⭐
**文件列表：**
- `app/cancel-subscription/` - 取消订阅页面

**功能特性：**
- ✅ 订阅取消确认
- ✅ 取消原因收集
- ✅ 挽留逻辑

---

### 8. 邮件服务配置 ⭐
**文件列表：**
- `lib/email.ts` - 邮件发送工具函数

**功能特性：**
- ✅ 邮件模板
- ✅ 邮件发送封装
- ✅ 支持多种邮件服务商

---

### 9. 环境变量配置示例 ⭐
**文件列表：**
- `env.example` - 完整的环境变量示例

**包含配置：**
- ✅ NextAuth 配置
- ✅ Google OAuth 配置
- ✅ Stripe 配置
- ✅ 数据库配置
- ✅ 其他第三方服务配置

---

## 📋 提取建议

### 优先级 1（必须提取）
1. ✅ Google 登录认证系统
2. ✅ Stripe 支付系统

### 优先级 2（建议提取）
3. ⚠️ 邀请推荐系统（如果项目需要）
4. ⚠️ API 密钥管理（如果项目需要）
5. ⚠️ 用户仪表板组件（通用组件）

### 优先级 3（可选提取）
6. ⚠️ 用户资料页面
7. ⚠️ 取消订阅页面
8. ⚠️ 邮件服务配置
9. ⚠️ 环境变量配置示例

---

## ❓ 请确认

请告诉我：
1. **必须提取的功能**（已标记 ⭐⭐⭐）
2. **需要提取的功能**（请勾选上述列表中的其他功能）
3. **不需要的功能**（我会跳过）

确认后，我将开始提取和整合这些功能到 `nextjs-template/` 目录中。

