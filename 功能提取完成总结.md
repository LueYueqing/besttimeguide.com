# åŠŸèƒ½æå–å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. ä¾èµ–æ›´æ–°
- âœ… æ›´æ–° `package.json` æ·»åŠ  NextAuthã€Stripeã€@auth/prisma-adapter ç­‰ä¾èµ–

### 2. æ•°æ®åº“ Schema
- âœ… æ›´æ–° `prisma/schema.prisma`ï¼ŒåŒ…å«ä»¥ä¸‹è¡¨ï¼š
  - `User` - ç”¨æˆ·è¡¨ï¼ˆæ”¯æŒ NextAuthã€é‚€è¯·ç³»ç»Ÿã€è®¡åˆ’ç®¡ç†ï¼‰
  - `Account` - OAuth è´¦æˆ·è¡¨ï¼ˆNextAuth å¿…éœ€ï¼‰
  - `Session` - ä¼šè¯è¡¨ï¼ˆNextAuth å¿…éœ€ï¼‰
  - `VerificationToken` - éªŒè¯ä»¤ç‰Œè¡¨ï¼ˆNextAuth å¿…éœ€ï¼‰
  - `UserSubscription` - ç”¨æˆ·è®¢é˜…è¡¨ï¼ˆStripe æ”¯ä»˜ï¼‰
  - `Referral` - é‚€è¯·è®°å½•è¡¨
  - `ApiKey` - API å¯†é’¥è¡¨

### 3. Google ç™»å½•è®¤è¯ç³»ç»Ÿ
- âœ… `lib/auth.ts` - NextAuth é…ç½®ï¼ˆGoogle OAuth + å¼€å‘æ¨¡å¼ç™»å½•ï¼‰
- âœ… `app/api/auth/[...nextauth]/route.ts` - NextAuth API è·¯ç”±
- âœ… `app/auth/signin/page.tsx` - ç™»å½•é¡µé¢
- âœ… `app/auth/error/page.tsx` - ç™»å½•é”™è¯¯é¡µé¢
- âœ… `components/Providers.tsx` - SessionProvider åŒ…è£…å™¨
- âœ… `components/AuthButton.tsx` - ç™»å½•/ç™»å‡ºæŒ‰é’®ç»„ä»¶
- âœ… `contexts/UserContext.tsx` - ç”¨æˆ·ä¸Šä¸‹æ–‡

### 4. Stripe æ”¯ä»˜ç³»ç»Ÿ
- âœ… `app/api/checkout/route.ts` - åˆ›å»º Stripe Checkout ä¼šè¯
- âœ… `app/api/stripe/webhook/route.ts` - Stripe Webhook å¤„ç†
- âœ… `app/api/billing/portal/route.ts` - Stripe è®¢é˜…ç®¡ç†é—¨æˆ·
- âœ… `app/pricing/page.tsx` - å®šä»·é¡µé¢
- âœ… `lib/pricing.ts` - ä»·æ ¼é…ç½®
- âœ… `lib/subscription.ts` - è®¢é˜…å·¥å…·å‡½æ•°

### 5. é‚€è¯·æ¨èç³»ç»Ÿ
- âœ… `lib/referral.ts` - é‚€è¯·å¥–åŠ±å¤„ç†é€»è¾‘
- âœ… `app/api/referral/associate/route.ts` - å…³è”é‚€è¯·å…³ç³»

### 6. API å¯†é’¥ç®¡ç†
- âœ… `app/api/api-keys/route.ts` - API å¯†é’¥åˆ—è¡¨å’Œåˆ›å»º
- âœ… `app/api/api-keys/[id]/route.ts` - API å¯†é’¥ç®¡ç†ï¼ˆæ›´æ–°/åˆ é™¤ï¼‰

### 7. ç”¨æˆ·ä»ªè¡¨æ¿ç»„ä»¶
- âœ… `app/dashboard/components/SubscriptionInfo.tsx` - è®¢é˜…ä¿¡æ¯æ˜¾ç¤º
- âœ… `app/dashboard/components/UpgradeModal.tsx` - å‡çº§å¼¹çª—
- âœ… `app/dashboard/components/DowngradeWarning.tsx` - é™çº§è­¦å‘Š
- âœ… `app/dashboard/components/StatsCards.tsx` - ç»Ÿè®¡å¡ç‰‡
- âœ… `app/dashboard/components/SidebarNavigation.tsx` - ä¾§è¾¹æ å¯¼èˆª
- âœ… `app/dashboard/components/QRCodeList.tsx` - åˆ—è¡¨ç»„ä»¶ï¼ˆç¤ºä¾‹ï¼‰
- âœ… `app/dashboard/components/QRCodePreviewModal.tsx` - é¢„è§ˆå¼¹çª—ï¼ˆç¤ºä¾‹ï¼‰

### 8. ç”¨æˆ·èµ„æ–™å’Œå–æ¶ˆè®¢é˜…
- âœ… `app/dashboard/profile/page.tsx` - ç”¨æˆ·èµ„æ–™é¡µé¢
- âœ… `app/dashboard/profile/profile-client.tsx` - ç”¨æˆ·èµ„æ–™å®¢æˆ·ç«¯ç»„ä»¶
- âœ… `app/cancel-subscription/page.tsx` - å–æ¶ˆè®¢é˜…é¡µé¢
- âœ… `app/cancel-subscription/cancel-subscription-client.tsx` - å–æ¶ˆè®¢é˜…å®¢æˆ·ç«¯ç»„ä»¶

### 9. é…ç½®å’Œæ–‡æ¡£
- âœ… æ›´æ–° `env.example` - å®Œæ•´çš„ç¯å¢ƒå˜é‡ç¤ºä¾‹ï¼ˆé€‚é… MySQLï¼‰
- âœ… æ›´æ–° `README.md` - æ·»åŠ åŠŸèƒ½è¯´æ˜å’Œé…ç½®æŒ‡å—
- âœ… æ›´æ–° `app/layout.tsx` - é›†æˆ Providers
- âœ… æ›´æ–° `components/Header.tsx` - é›†æˆ AuthButton

## ğŸ”§ éœ€è¦æ‰‹åŠ¨é…ç½®çš„é¡¹

### ç¯å¢ƒå˜é‡
å¤åˆ¶ `env.example` ä¸º `.env.local` å¹¶å¡«å†™ï¼š
1. **æ•°æ®åº“**: `DATABASE_URL` (MySQL è¿æ¥å­—ç¬¦ä¸²)
2. **NextAuth**: `NEXTAUTH_SECRET`, `NEXTAUTH_URL`
3. **Google OAuth**: `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`
4. **Stripe**: `STRIPE_SECRET_KEY`, `STRIPE_WEBHOOK_SECRET`, `STRIPE_PRICE_*`

### Stripe é…ç½®æ­¥éª¤
1. åœ¨ Stripe Dashboard åˆ›å»ºäº§å“å’Œä»·æ ¼
2. é…ç½® Webhook ç«¯ç‚¹: `https://yourdomain.com/api/stripe/webhook`
3. å¤åˆ¶ä»·æ ¼ ID åˆ°ç¯å¢ƒå˜é‡

### Google OAuth é…ç½®æ­¥éª¤
1. åœ¨ Google Cloud Console åˆ›å»º OAuth 2.0 å®¢æˆ·ç«¯
2. æ·»åŠ é‡å®šå‘ URI: `http://localhost:3000/api/auth/callback/google`
3. å¤åˆ¶ Client ID å’Œ Secret åˆ°ç¯å¢ƒå˜é‡

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“ç±»å‹**: æ¨¡æ¿ä½¿ç”¨ MySQLï¼ŒåŸé¡¹ç›®ä½¿ç”¨ PostgreSQLï¼Œå·²é€‚é…
2. **ç”¨æˆ· ID ç±»å‹**: å·²ç»Ÿä¸€ä¸º `Int`ï¼ˆæ•°å­—ç±»å‹ï¼‰ï¼Œæ‰€æœ‰ç›¸å…³å‡½æ•°å·²é€‚é…
3. **å¼€å‘æ¨¡å¼ç™»å½•**: è®¾ç½® `ENABLE_DEV_LOGIN=true` å¯ä½¿ç”¨å¼€å‘è´¦å·ç™»å½•
4. **ä¸šåŠ¡ç‰¹å®šç»„ä»¶**: `QRCodeList` å’Œ `QRCodePreviewModal` æ˜¯ç¤ºä¾‹ç»„ä»¶ï¼Œéœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡è°ƒæ•´

## ğŸš€ ä¸‹ä¸€æ­¥

1. è¿è¡Œ `npm install` å®‰è£…ä¾èµ–
2. é…ç½®ç¯å¢ƒå˜é‡
3. è¿è¡Œ `npm run db:generate` å’Œ `npm run db:push` åˆå§‹åŒ–æ•°æ®åº“
4. è¿è¡Œ `npm run dev` å¯åŠ¨å¼€å‘æœåŠ¡å™¨
5. æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚è°ƒæ•´ç»„ä»¶å’Œé¡µé¢

## ğŸ“š ç›¸å…³æ–‡æ¡£

è¯¦ç»†é…ç½®æŒ‡å—è¯·å‚è€ƒï¼š
- `nextjs-template/README.md` - æ¨¡æ¿ä½¿ç”¨è¯´æ˜
- `docs/` - é¡¹ç›®æ–‡æ¡£ç›®å½•

